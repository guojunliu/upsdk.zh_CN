
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Andoriod 接入帮助 &#8212; UPInteractive Document  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Eclipse 接入帮助" href="h02_ducument.html" />
    <link rel="prev" title="help 1 帮助文档" href="../help/help_01.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="andoriod">
<span id="andoriod"></span><h1>Andoriod 接入帮助<a class="headerlink" href="#andoriod" title="Permalink to this headline">¶</a></h1>
<p>有关Studio的帮助，本文将以四个要点讲解如下。</p>
<div class="section" id="up-adsdk">
<span id="up-adsdk"></span><h2>一、UP ADSDK的目录结构<a class="headerlink" href="#up-adsdk" title="Permalink to this headline">¶</a></h2>
<p>针对Android Studio 或 Gradle 构建的工程，UP ADSDK提倡以<code class="docutils literal notranslate"><span class="pre">*.aar</span></code>的方式被其它主工程导入。UP ADSDK Studio版本的下载包解压后的目录结构如下：</p>
<p><img alt="" src="http://docs.upltv.com/uploads/201805/5af5689a90a1a_5af5689a.png" /></p>
<div class="section" id="up-adsdk">
<span id="id1"></span><h3>1. UP ADSDK 主包<a class="headerlink" href="#up-adsdk" title="Permalink to this headline">¶</a></h3>
<p>如上图所示，命名为<code class="docutils literal notranslate"><span class="pre">UPAdsSdk_x.x.xx.aar</span></code>的文件即为UP ADSDK 主包，必须添加到你的主工程中。</p>
</div>
<div class="section" id="up-adsdk">
<span id="id2"></span><h3>2. UP ADSDK 联盟依赖库<a class="headerlink" href="#up-adsdk" title="Permalink to this headline">¶</a></h3>
<p>UP ADSDK与其它联盟广告商是一种松散耦合在的关系，可以根据实际需要在主工程中剔除某些不支持广告依赖库，从而减少应用程序的包体大小。</p>
<p>这些联盟商的依赖库除了Admob与Facebook广告依赖库，其它的目前都是xxxx_ads.aar的文件形式存在。</p>
</div>
<div class="section" id="admobfacebook">
<span id="admobfacebook"></span><h3>3. Admob与Facebook的广告依赖库<a class="headerlink" href="#admobfacebook" title="Permalink to this headline">¶</a></h3>
<p>UP ADSDK的本地文件中，提供了Admob与Facebook 两种广告平台的aar依赖库，以备在网络不佳或其它原因时直接从本地libs中加载提供便利。即使如此，我们仍然提倡尽量在gradle中在线从两者的远程仓库更新下载合适的依赖库。</p>
<blockquote>
<div>有关Admob与Facebook 两种广告平台的接入说明，在本节的后续内容中有详解解说。</div></blockquote>
</div>
</div>
<div class="section" id="android-studio-gradle-up-adsdk">
<span id="android-studio-gradle-up-adsdk"></span><h2>二、使用 Android Studio 的 Gradle 导入UP ADSDK主包<a class="headerlink" href="#android-studio-gradle-up-adsdk" title="Permalink to this headline">¶</a></h2>
<p>根据上文的介绍，在你下载好的文件目录中找到名为 <code class="docutils literal notranslate"><span class="pre">UPAdsSdk_x.x.xx.aar</span></code>的文件，并添加到项目的<code class="docutils literal notranslate"><span class="pre">libs</span></code>目录下。
添加后，Studio工程的效果图如下所示：</p>
<p><img alt="" src="http://docs.upltv.com/uploads/201805/5af56922f4043_5af56922.png" /></p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">UPAdsSdk_3.0.03.aar</span></code>仅作为示例参考说明</div></blockquote>
<p>为了确保libs目录的aar包能正确被工程引用，请检查<code class="docutils literal notranslate"><span class="pre">app</span></code>目录下的<code class="docutils literal notranslate"><span class="pre">build.gradle</span></code>文件中，是否添加以下配置参数：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repositories</span> <span class="p">{</span>
    <span class="n">flatDir</span> <span class="p">{</span>
        <span class="n">dirs</span> <span class="s1">&#39;libs&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>最后将aar添加到compile方法中</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">your</span> <span class="n">other</span> <span class="n">setting</span>
    <span class="o">//</span> <span class="n">请将UPAdsSdk_3</span><span class="o">.</span><span class="mf">0.33</span><span class="n">替换成实际的文件名</span>
    <span class="nb">compile</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s1">&#39;UPAdsSdk_3.0.03&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="s1">&#39;aar&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>至此，UP ADSDK的aar包已经成功配置到你的工程中，静等gradle编译生效。但UP ADSDK的工程导入工作还未完成，还差重要的最后一步工作要做：<strong>添加其它依赖库</strong>。</p>
<blockquote>
<div>作为优秀而强大的聚合平台，UP ADSDK必须灵活兼容第三方广告联盟商的运行库，才能取百家之长发挥最大的广告效益。因此，正确添加第三方依赖库，才能发挥UP ADSDK的最大潜能。</div></blockquote>
<p>如果您使用 Android Studio 或 Gradle 构建 Android 项目，那么首先需要将目录中的 <code class="docutils literal notranslate"><span class="pre">UPAdsSdk_x.x.xx.aar</span></code> 文件导入到您的项目中，目录中的 <code class="docutils literal notranslate"><span class="pre">xxx_ads.aar</span></code> 文件为使用各个广告联盟需要依赖的文件，您可以将其全部导入到项目中，如果有特殊原因导致您不希望导入某个平台的文件，您也可以只选择需要的广告联盟的文件进行导入。</p>
</div>
<div class="section" id="">
<span id="id3"></span><h2>三、添加广告联盟的依赖库<a class="headerlink" href="#" title="Permalink to this headline">¶</a></h2>
<p>部分广告商的 SDK 运行依赖一些公共的第三方库，使用 Android Studio 构建的项目可以通过下述方式来将所依赖的第三方库导入你的项目。</p>
<p><strong>原则上，我们建议将依赖的第三方库全部导入你的项目，但在某些确定条件下可以有选则性地添加某些广告联盟库以减少工程大小。但无论如何确保你所添加的联盟库完全满足当前广告业务运行时所依赖的外部条件，否则会因为缺少某些必要的支持而导致崩溃.</strong></p>
<p>如果你想去除某联盟商的支持，但又不清楚如何操作，请优先与我们的技术支持人员沟通，在他们的协助下你将会正确而顺利达成目的。</p>
<div class="section" id="aar">
<span id="aar"></span><h3>1.添加联盟商的*.aar<a class="headerlink" href="#aar" title="Permalink to this headline">¶</a></h3>
<p>在你下载的目标文件中，命名为 <code class="docutils literal notranslate"><span class="pre">xxx_ads.aar</span></code> 的文件为使用各个广告联盟需要依赖的文件。请参考<strong>导入UP ADSDK aar文件</strong>的方式将其添加到你的工程中。</p>
</div>
<div class="section" id="">
<span id="id4"></span><h3>2. 添加其它外部依赖<a class="headerlink" href="#" title="Permalink to this headline">¶</a></h3>
<p>由于一些联盟商运行时，需要其它额外的Android Api支持，因此还必须添加如下外部依赖库。</p>
<div class="section" id="gradlejcenter">
<span id="gradlejcenter"></span><h4>1. 在Gradle中配置jcenter节点<a class="headerlink" href="#gradlejcenter" title="Permalink to this headline">¶</a></h4>
<p>首先在你项目的主工程 <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code> 文件中 <code class="docutils literal notranslate"><span class="pre">repositories</span></code> 节点加入 <code class="docutils literal notranslate"><span class="pre">jcenter</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">buildscript</span> <span class="p">{</span>
    <span class="n">repositories</span> <span class="p">{</span>
        <span class="n">mavenCentral</span><span class="p">();</span>
        <span class="o">//</span> <span class="o">********</span> <span class="n">加入</span> <span class="n">jcenter</span> <span class="o">********</span>
        <span class="n">jcenter</span><span class="p">()</span>
        <span class="n">maven</span> <span class="p">{</span>
            <span class="n">url</span> <span class="s1">&#39;https://maven.google.com/&#39;</span>
            <span class="n">name</span> <span class="s1">&#39;Google&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">dependencies</span> <span class="p">{</span>
        <span class="n">classpath</span> <span class="s1">&#39;com.android.tools.build:gradle:2.1.3&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">allprojects</span> <span class="p">{</span>
    <span class="n">repositories</span> <span class="p">{</span>
        <span class="o">//</span> <span class="o">********</span> <span class="n">加入</span> <span class="n">jcenter</span> <span class="o">********</span>
        <span class="n">jcenter</span><span class="p">()</span>
        <span class="n">maven</span> <span class="p">{</span>
            <span class="n">url</span> <span class="s1">&#39;https://maven.google.com/&#39;</span>
            <span class="n">name</span> <span class="s1">&#39;Google&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="android-support">
<span id="android-support"></span><h4>2. 加入 Android Support 支持库<a class="headerlink" href="#android-support" title="Permalink to this headline">¶</a></h4>
<p><strong>【注意】由于Facebook等广告依赖了recyclerview的库，Google Admob等广告依赖Android Support V4库，因此请务必将这些依赖库引入你的项目，否则会导致程序崩溃！</strong></p>
<p>广告的正常展示需要 <code class="docutils literal notranslate"><span class="pre">support</span></code> 库的支持，请参考以下方式将其引入到您的项目中。</p>
<p>可以通过以下的方式添加依赖</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
    <span class="nb">compile</span> <span class="s1">&#39;com.android.support:recyclerview-v7:26.1.0&#39;</span>
    <span class="nb">compile</span> <span class="s1">&#39;com.android.support:support-v4:26.1.0&#39;</span>
    <span class="nb">compile</span> <span class="s1">&#39;com.android.support:appcompat-v7:26.1.0&#39;</span>
    <span class="nb">compile</span> <span class="s1">&#39;com.android.support:support-annotations:26.1.0&#39;</span>
    <span class="nb">compile</span>  <span class="s1">&#39;com.android.support:customtabs:26.1.0&#39;</span>
    <span class="nb">compile</span> <span class="s1">&#39;com.android.support:cardview-v7:26.1.0&#39;</span>
    <span class="o">//</span><span class="n">gson</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="n">jar在android_support_library目录中</span>
    <span class="nb">compile</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s1">&#39;gson-2.7&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="s1">&#39;jar&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>如果您不想通过上面的方式引入<code class="docutils literal notranslate"><span class="pre">support</span></code>库，我们还为您在  <code class="docutils literal notranslate"><span class="pre">android_support_library</span></code> 文件夹中准备了对应的 <code class="docutils literal notranslate"><span class="pre">xxx.aar</span></code> 文件，您只需要将文件添加到项目中并且加入<code class="docutils literal notranslate"><span class="pre">compile</span></code>命令即可。</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="o">{</span>
   <span class="c1">//core lib</span>
   <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;UPAdsSdk_Cpp_3.0.04_dex&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
   <span class="c1">//support libs</span>
   <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;animated-vector-drawable-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;appcompat-v7-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;customtabs-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;runtime-1.0.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-compat-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-core-ui-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-core-utils-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-fragment-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-media-compat-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-v4-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-vector-drawable-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;common-1.0.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;jar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;supprot-common-1.0.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;jar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;support-annotations-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;jar&#39;</span><span class="o">)</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span> <span class="s1">&#39;recyclerview-v7-26.1.0&#39;</span><span class="o">,</span> <span class="nl">ext:</span> <span class="s1">&#39;aar&#39;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="google-ads-sdk">
<span id="google-ads-sdk"></span><h4>3. 加入Google Ads SDK<a class="headerlink" href="#google-ads-sdk" title="Permalink to this headline">¶</a></h4>
<p>如果您的项目中希望接入Admob的广告，我们需要您在的项目中加入 Google Ads 支持，可以按以下的方式添加依赖</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
    <span class="nb">compile</span> <span class="s1">&#39;com.google.android.gms:play-services-ads:15.0.1&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<blockquote>
<div>如果你只想通过本地添加gms play所依赖的aar文件，也可以在gradle文件中忽略此配置。
特别地，如果你的工程中已经存在与UP ADSDK所依赖的gms play不同版时，请用更高的版本替换低版本。</div></blockquote>
</div>
</div>
</div>
<div class="section" id="proguard">
<span id="proguard"></span><h2>四、修改 Proguard<a class="headerlink" href="#proguard" title="Permalink to this headline">¶</a></h2>
<p>如果你的项目使用了 <code class="docutils literal notranslate"><span class="pre">proguard</span></code>，你需要将 <code class="docutils literal notranslate"><span class="pre">proguard-project.txt</span></code> 文件中的内容复制粘贴到你项目使用的 <code class="docutils literal notranslate"><span class="pre">proguard</span></code> 配置文件中。</p>
</div>
<div class="section" id="demo">
<span id="demo"></span><h2>五、Demo工程<a class="headerlink" href="#demo" title="Permalink to this headline">¶</a></h2>
<p>为帮助您更好的了解广告SDK的接入以及使用，我们在这里提供了一个简单的<a class="reference external" href="https://github.com/AvidlyGit/AdSdkDemo-Studio">Demo工程</a>。</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">UPInteractive Document</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/android.html">Android 帮助文档</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/ios.html">IOS SDK帮助文档</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../help/help_01.html">help 1 帮助文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c02/p01_import.html">工程引入</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c02/p02_init.html">初始化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c02/p03_event.html">事件打点</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c02/p04_login.html">登录打点</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c02/p05_payment.html">支付打点</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c02/p05_payment.html#">添加引用</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/unity.html">Unity Plugin帮助文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../chapters/ios.html">IOS SDK帮助文档</a><ul>
  <li><a href="../help/help_01.html">help 1 帮助文档</a><ul>
      <li>Previous: <a href="../help/help_01.html" title="previous chapter">help 1 帮助文档</a></li>
      <li>Next: <a href="h02_ducument.html" title="next chapter">Eclipse 接入帮助</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, upltv.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/h01/h01_document.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>